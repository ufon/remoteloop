<!DOCTYPE html>
<html class="app" lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Привет мир!</title>
  <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
  <style>
    body {
      margin: 0;
      text-align: center;
    }
  </style>
</head>

<body>
  <canvas id="canvas"></canvas>

  <script>
    const QRCode = require('qrcode');
    const { ipcRenderer } = require('electron');

    const drawQRCode = () => {
      const getLocalAddress = () => "http://" + require("ip").address() + ":8080";
      const canvasElement = document.getElementById('canvas');
      QRCode.toCanvas(canvasElement, getLocalAddress(), {
        scale: 5
      });
    };

    const updateOnlineStatus = () => {
      if (navigator.onLine) {
        drawQRCode();
        ipcRenderer.send('network-change', navigator.onLine);
      }
    }

    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);

    updateOnlineStatus();
  </script>
</body>

</html>